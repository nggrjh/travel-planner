version: "3"

includes:
  gen: gen.yml

tasks:
  setup:
    deps:
      - gen:bin
    cmds:
      - "[ -f bin/docker-compose ] || curl -L https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m) -o bin/docker-compose && chmod +x bin/docker-compose"

  up:
    deps:
      - setup
    cmds:
      - bin/docker-compose up -d --build

  down:
    deps:
      - setup
    cmds:
      - bin/docker-compose down
